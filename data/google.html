<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
        }

        html,
        body {
            height: 100%;
        }

        #allmap {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="allmap"></div>
    <script>
        var map;
        var points = [
            [113.63623281091695,34.74863674608032],
            [113.63558644135101,34.75380086865398],
            [113.63477873796256,34.75396086473053],
            [113.63427098976821,34.753981966563046],
            [113.63383618446423,34.75405471723783],
            [113.6325969876398,34.75403636055147],
            [113.63156667955124,34.75416124693671],
            [113.6307000649562,34.75425422017503],
            [113.63020227698814,34.75431350268053],
            [113.62942307476719,34.75437988699206],
            [113.62869984027799,34.75441094458149],
            [113.6282989951733,34.75438127740893],
            [113.62787898951905,34.75442325362141],
            [113.62782601915704,34.754493886891524],
            [113.62779203339265,34.75499164995058],
            [113.62815533527072,34.755154766180446],
            [113.62833821278738,34.75576429600505],
            [113.62858171803684,34.75647214617089],
            [113.62873386967186,34.75703950777586],
            [113.6287440432901,34.757470942921536],
            [113.62878454752871,34.75776460660666],
            [113.62919257585845,34.75888905835843],
            [113.62932439010676,34.759187249711374],
            [113.62946391793808,34.75975739939035],
            [113.62970551377643,34.760263401896644],
            [113.62962528786728,34.76051182363649],
            [113.62976789496959,34.76083963021759],
            [113.62983761825254,34.76131836778579],
            [113.63008637082693,34.76215448738463],
            [113.63020631766047,34.762503965217334],
            [113.63048271882775,34.76348120399085],
            [113.63081449019262,34.76432763695182],
            [113.63126814596274,34.765242585241594],
            [113.63129165309363,34.76544153978764],
            [113.63133628384156,34.766036923040176],
            [113.631601281217,34.76606731486769],
            [113.63177603542766,34.76611101918599],
            [113.6318908987498,34.766124485907504],
            [113.63224854635999,34.76612436745068],
            [113.63377656504336,34.766002491502],
            [113.63431870099434,34.76586147065891],
            [113.63527324945403,34.76584442776994],
            [113.63603478894025,34.7657712661364],
            [113.63628405262796,34.76576095257166],
            [113.6369546445783,34.765712344573984],
            [113.63769827647432,34.765797331456326],
            [113.6387980500211,34.76610105049715],
            [113.639030636485,34.76623114696442],
            [113.63973600721351,34.76656673548129],
            [113.64001326805366,34.76673444534282],
            [113.64030309822844,34.76681389763928],
            [113.64082476975018,34.767154742239626],
            [113.6417017283201,34.76761177087915],
            [113.64139019214421,34.767916758973115],
            [113.64110590619345,34.768184203138205],
            [113.64057435950248,34.768755790822695],
            [113.6398671221322,34.76957546696444],
            [113.63971250206114,34.7697407118288],
            [113.64020004497529,34.770047745987924],
            [113.64078554580266,34.77040314903961],
            [113.64205544736363,34.77096823217514],
            [113.64234020114567,34.77121036253506],
            [113.64359268650813,34.77168638384288],
            [113.64456911812373,34.77222372678584],
            [113.64598066093357,34.7725921990592],
            [113.64715045429807,34.773018818666664],
            [113.64775817728854,34.77318506589665],
            [113.64864933751538,34.77355976218294],
            [113.65007469899035,34.774165830452034],
            [113.65032703585118,34.774290722683745],
            [113.65061301469112,34.77439495458529],
            [113.65173754132076,34.77449018541084],
            [113.65193785967917,34.774532930064055],
            [113.65295057342303,34.77441841279486],
            [113.65421342761081,34.77443286968343],
            [113.65542620030426,34.77438275302031],
            [113.65545254858468,34.77445649319726],
            [113.6556053925664,34.77449326002096],
            [113.65690406706817,34.774511062415485],
            [113.65818028958756,34.7744213961255],
            [113.65915717307962,34.774337004466275],
            [113.65992690326591,34.77446523408438],
            [113.66108544202208,34.77465250876732],
            [113.659266,34.774469],
            [113.658473,34.774428],
            [113.658325,34.774444],
            [113.658268,34.774461],
            [113.658268,34.774636],
            [113.65827,34.774748],
            [113.658265,34.776688],
            [113.658297,34.77711],
            [113.65851,34.77789],
            [113.658492,34.778719],
            [113.658342,34.779771],
            [113.658352,34.780027],
            [113.658242,34.780747],
            [113.658204,34.781655],
            [113.658266,34.782374],
            [113.658327,34.783287],
            [113.658429,34.783594],
            [113.658314,34.783599],
            [113.658496,34.783609],
            [113.658471,34.783564],
            [113.65919438364672,34.78352335925253],
            [113.661062,34.783619],
            [113.661207,34.783596],
            [113.662464,34.78362],
            [113.663835,34.783607],
            [113.665291,34.78373],
            [113.666513,34.783557],
            [113.66677,34.783691],
            [113.66774038095888,34.783739494002965],
            [113.66856586030123,34.78350956303247],
            [113.66955063341189,34.783753276088966],
            [113.67058908260913,34.78375722885279],
            [113.67195031505057,34.78403937593111],
            [113.67246183146254,34.78396586172771],
            [113.67303233206164,34.78395763450662],
            [113.6742177473344,34.78397137626795],
            [113.67517526579633,34.7838021647324],
            [113.67649652896745,34.783842986289876],
            [113.67746355705364,34.783528262877695],
            [113.67790169224476,34.78348042742019],
            [113.67911542525668,34.7835782011282],
            [113.6804144700599,34.783985289961414],
            [113.68175110107563,34.78366782155831],
            [113.68235461819611,34.78373313104776],
            [113.68239263548446,34.78364759923137],
            [113.68387221880434,34.783675839494606],
            [113.68471315509899,34.78371609342376],
            [113.68517439699684,34.78368466524816],
            [113.6852096774666,34.78372081320647],
            [113.68598286744846,34.783841531751804],
            [113.68714791090386,34.78366494833154],
            [113.68746397891366,34.78370008021308],
            [113.68870994543902,34.783666642513175],
            [113.68973964395587,34.783786360252996],
            [113.69088812358109,34.78374169883692],
            [113.69247461225861,34.78363230421],
            [113.69246778779103,34.78362017994586],
            [113.6927626834899,34.78352415536339],
            [113.69380722177989,34.7835942200969],
            [113.6950075152018,34.783679280305826],
            [113.69633289460107,34.783813819910065],
            [113.69751551499438,34.7836497894139],
            [113.69763877747076,34.78288863412589],
            [113.69756720440114,34.78239730502991],
            [113.69761536820039,34.781867635576205],
            [113.697741996951,34.781054618036336],
            [113.69779505042068,34.780329498980336],
            [113.69760903310934,34.779725447434394],
            [113.69751012019225,34.77942271767052],
            [113.69761900186631,34.77905271835347],
            [113.69769141921711,34.77822414910119],
            [113.69760026838306,34.777355918167835],
            [113.69756081835143,34.77706743814121],
            [113.69762524829984,34.77694874358812],
            [113.69790862164334,34.776967035570415],
            [113.69830166408315,34.777013303416275],
            [113.69841411929356,34.77702757961695],
        ];

        const ak = 'AIzaSyBawmkuP7xAg_Gz1WztFdAxohwaWWEVqbU'

        const init = (id, option) => {
        return new Promise(resolve => {
        loadJs(() => {
        createMap(id, option);
        resolve()
        })
        })
        }

        const loadJs = callback => {
        if(window.google && window.google.maps) {
        callback()
        }
        else {
        let script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = `http://maps.google.cn/maps/api/js?region=tw&language=zh-TW&key=${ak}&callback=initMap`;
        document.head.appendChild(script);
        window.initMap = callback;
        }
        }

        const createMap = (id, { lng, lat, zoom }) => {
        map = new google.maps.Map(document.getElementById(id), {
        center: { lat:parseFloat(lat), lng:parseFloat(lng) },
        zoom,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false,
        mapTypeControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT,
        mapTypeIds: []
        }
        })
        return map
        }

        const drawLine = (points, color) => {
        let strokeColor = color || 'red';
        let polyline = new google.maps.Polyline({
        path:points,
        strokeColor,
        strokeWeight: 4,
        strokeOpacity: .8,
        })
        return polyline.setMap(map);
        }

        async function initMap() {
            let [lng, lat] = points[0];
            await init('allmap', { lng, lat, zoom: 15 });
            createMarker(map, lat, lng)
            let pts = [];
            for (let i in points) {
            let point = points[i];
            pts.push({ lng: point[0], lat: point[1] });
            }
            drawLine(pts)
        }

        const createMarker = (map, lat, lng) => {
        return new google.maps.Marker({
        position:{lat, lng},
        map
        });
        }

        initMap()

        
    </script>
</body>

</html>